# Configuration for LSTM Regression Optimization

experiment:
  name: "SWCNT_LSTM_Regression_v2"
  study_name: "lstm_regression_v2"
  task: "regression"
  model_type: "lstm"

data:
  feature_cols: 402
  target_cols: ["NO2", "H2S", "Acet"]
  dedrift_method: "Exp_pd"
  dedrift_params:
    alpha: 0.0217
    envelope_ind: [201]

preprocessing:
  cv_start_cycle: 6
  cv_test_size: 2
  look_back_range: [20, 120]
  n_components_range: [10, 160]

model:
  # LSTM-specific (only if model_type: lstm)
  look_back_range: [20, 120]
  n_components_range: [10, 160]
  n_layers_range: [1, 3]
  n_units_range: [16, 96]
  n_units_step: 16
  dropout_range: [0.1, 0.5]
  learning_rate_range: [5.0e-5, 1.0e-1]
  batch_size_options: [32, 64, 128, 256]
  epochs: 100
  patience: 30

model:
  n_layers_range: [1, 3]
  n_units_range: [16, 96]
  n_units_step: 16
  dropout_range: [0.1, 0.5]
  learning_rate_range: [5.0e-5, 1.0e-1]
  batch_size_options: [32, 64, 128, 256]
  epochs: 100
  patience: 30

optimization:
  n_trials: 1000
  timeout: null  # seconds, null = no timeout
  direction: "minimize"  # minimize RMSE
  pruner:
    type: "MedianPruner"
    n_startup_trials: 20  # Reduced for 1-2 CV folds
    n_warmup_steps: 1     # Check after 1st fold
    interval_steps: 5     # Check every 5 epoch/fold

storage:
  optuna: "sqlite:///optuna_studies.db"  # Persistent Optuna storage
  mlflow: "sqlite:///mlflow.db"          # Persistent MLflow storage

mlflow:
  tracking_uri: "sqlite:///mlflow.db"
  artifact_location: null
  log_models: true
  log_plots: true

random_seed: 42